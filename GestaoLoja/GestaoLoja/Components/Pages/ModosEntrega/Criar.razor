@page "/modosentrega/criar"
@inject ApplicationDbContext db
@inject NavigationManager nav
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize(Roles = "Administrador,Funcionário")]

<h3>Novo Modo de Entrega</h3>

<div class="mb-3">
    <label class="form-label">Nome</label>
    <input class="form-control" @bind="modo.Nome" />
</div>

<div class="mb-3">
    <label class="form-label">Detalhe</label>
    <input class="form-control" @bind="modo.Detalhe" />
</div>

<button class="btn btn-primary me-2" @onclick="Guardar">Guardar</button>
<button class="btn btn-secondary" @onclick="Cancelar">Cancelar</button>

@code {
    ModoEntrega modo = new();

    void Guardar()
    {
        if (string.IsNullOrWhiteSpace(modo.Nome))
            return;

        db.ModosEntrega.Add(modo);
        db.SaveChanges();
        nav.NavigateTo("/modosentrega");
    }

    void Cancelar() => nav.NavigateTo("/modosentrega");
}
